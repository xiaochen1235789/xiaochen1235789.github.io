<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å´©é“å¡æ± æ¨¡æ‹Ÿ - å›¾ç‰‡åŒ–UI</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
            user-select: none;
        }
        
        body {
            background: linear-gradient(135deg, #0c0c1e 0%, #1a1a3a 50%, #0c0c1e 100%);
            color: #e0e0ff;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(74, 44, 140, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(107, 70, 193, 0.1) 0%, transparent 50%);
            z-index: -1;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* é¡¶éƒ¨æ¨ªå¹… */
        .header-banner {
            position: relative;
            height: 180px;
            background: linear-gradient(90deg, rgba(26, 26, 46, 0.9) 0%, rgba(38, 28, 68, 0.9) 100%);
            border-radius: 20px;
            margin-bottom: 30px;
            overflow: hidden;
            border: 1px solid rgba(107, 70, 193, 0.5);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        .banner-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('https://images.unsplash.com/photo-1620641788421-7a1c342ea42e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80') center/cover no-repeat;
            opacity: 0.2;
            filter: brightness(0.7) saturate(1.5);
        }
        
        .banner-content {
            position: relative;
            height: 100%;
            display: flex;
            align-items: center;
            padding: 0 40px;
        }
        
        .pool-title {
            font-size: 36px;
            font-weight: bold;
            background: linear-gradient(90deg, #ffd166, #ff9e6d);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 20px rgba(255, 209, 102, 0.3);
            margin-bottom: 10px;
        }
        
        .pool-subtitle {
            font-size: 20px;
            color: #b8b8ff;
            margin-bottom: 5px;
        }
        
        .pool-time {
            color: #8888cc;
            font-size: 16px;
        }
        
        .character-tag {
            position: absolute;
            right: 40px;
            top: 50%;
            transform: translateY(-50%);
            background: linear-gradient(90deg, #4a2c8c, #6b46c1);
            padding: 12px 25px;
            border-radius: 12px;
            font-size: 24px;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(107, 70, 193, 0.4);
        }
        
        /* ä¸»å†…å®¹åŒºåŸŸ */
        .main-content {
            display: flex;
            flex-wrap: wrap;
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .left-panel {
            flex: 1;
            min-width: 300px;
        }
        
        .right-panel {
            flex: 1;
            min-width: 300px;
        }
        
        /* è§’è‰²å±•ç¤ºé¢æ¿ */
        .character-panel {
            background: rgba(26, 26, 46, 0.8);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid rgba(107, 70, 193, 0.3);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }
        
        .char-image-container {
            position: relative;
            width: 100%;
            height: 350px;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 20px;
            background: linear-gradient(45deg, #1a1a2e, #2d2d4e);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .char-image {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(74, 44, 140, 0.7), rgba(107, 70, 193, 0.5)), 
                        url('https://images.unsplash.com/photo-1518709268805-4e9042af2176?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80') center/cover no-repeat;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            color: #fff;
            position: relative;
        }
        
        .char-info {
            text-align: center;
        }
        
        .char-name {
            font-size: 28px;
            font-weight: bold;
            color: #ffd166;
            margin-bottom: 8px;
        }
        
        .char-desc {
            color: #b8b8ff;
            font-size: 18px;
            margin-bottom: 5px;
        }
        
        .char-rarity {
            color: #ff9e6d;
            font-size: 16px;
        }
        
        /* æ¦‚ç‡é¢æ¿ */
        .rate-panel {
            background: rgba(26, 26, 46, 0.8);
            border-radius: 20px;
            padding: 25px;
            border: 1px solid rgba(107, 70, 193, 0.3);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }
        
        .panel-title {
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 20px;
            color: #ffd166;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .panel-title i {
            color: #6b46c1;
        }
        
        .rate-item {
            margin-bottom: 20px;
        }
        
        .rate-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        
        .rate-name {
            font-size: 18px;
        }
        
        .rate-value {
            font-weight: bold;
            color: #ff9e6d;
        }
        
        .rate-bar {
            height: 12px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            overflow: hidden;
        }
        
        .rate-fill {
            height: 100%;
            border-radius: 6px;
        }
        
        .rate-5 { background: linear-gradient(90deg, #ffd166, #ff9e6d); width: 0.6%; }
        .rate-4 { background: linear-gradient(90deg, #b266ff, #8a2be2); width: 5.1%; }
        .rate-3 { background: linear-gradient(90deg, #66b3ff, #4682b4); width: 94.3%; }
        
        /* ä¿åº•è®¡æ•° */
        .pity-counter {
            display: flex;
            gap: 15px;
            margin-top: 25px;
        }
        
        .pity-box {
            flex: 1;
            background: rgba(40, 40, 80, 0.5);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            border: 1px solid rgba(107, 70, 193, 0.3);
        }
        
        .pity-title {
            font-size: 16px;
            color: #b8b8ff;
            margin-bottom: 8px;
        }
        
        .pity-value {
            font-size: 28px;
            font-weight: bold;
            color: #ff9e6d;
        }
        
        .pity-sub {
            font-size: 14px;
            color: #8888cc;
            margin-top: 5px;
        }
        
        /* è´§å¸å’ŒæŠ½å¡æŒ‰é’® */
        .currency-panel {
            background: rgba(26, 26, 46, 0.8);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid rgba(107, 70, 193, 0.3);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }
        
        .currency-display {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .currency-item {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 12px;
            background: rgba(40, 40, 80, 0.5);
            padding: 15px;
            border-radius: 12px;
            border: 1px solid rgba(107, 70, 193, 0.3);
        }
        
        .currency-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }
        
        .stellar-icon {
            background: linear-gradient(135deg, #66b3ff, #0066cc);
        }
        
        .ticket-icon {
            background: linear-gradient(135deg, #ff6b9d, #ff4757);
        }
        
        .currency-info {
            flex: 1;
        }
        
        .currency-name {
            font-size: 14px;
            color: #b8b8ff;
        }
        
        .currency-amount {
            font-size: 24px;
            font-weight: bold;
        }
        
        .draw-buttons {
            display: flex;
            gap: 15px;
        }
        
        .draw-btn {
            flex: 1;
            padding: 18px;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .draw-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }
        
        .draw-btn:active {
            transform: translateY(1px);
        }
        
        .draw-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }
        
        .single-draw {
            background: linear-gradient(135deg, #4a2c8c, #6b46c1);
        }
        
        .ten-draw {
            background: linear-gradient(135deg, #ff6b9d, #ff4757);
        }
        
        /* æŠ½å¡ç»“æœå¼¹çª— */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            background: linear-gradient(135deg, rgba(26, 26, 46, 0.95), rgba(38, 28, 68, 0.95));
            border-radius: 20px;
            padding: 25px;
            max-width: 800px;
            width: 95%;
            max-height: 85vh;
            overflow-y: auto;
            border: 1px solid rgba(107, 70, 193, 0.5);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6);
            position: relative;
        }
        
        .modal-header {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .modal-title {
            font-size: 28px;
            font-weight: bold;
            background: linear-gradient(90deg, #ffd166, #ff9e6d);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 10px;
        }
        
        .modal-subtitle {
            color: #b8b8ff;
            font-size: 16px;
        }
        
        .result-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-bottom: 25px;
        }
        
        .result-item {
            background: rgba(40, 40, 80, 0.5);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s;
            opacity: 0;
            transform: translateY(20px) scale(0.95);
        }
        
        .result-item.revealed {
            opacity: 1;
            transform: translateY(0) scale(1);
        }
        
        .result-rarity {
            font-size: 18px;
            margin-bottom: 8px;
            font-weight: bold;
        }
        
        .result-name {
            font-size: 14px;
            margin-bottom: 5px;
        }
        
        .result-type {
            font-size: 12px;
            color: #8888cc;
        }
        
        .result-5star {
            border-color: #ffd166;
            box-shadow: 0 0 15px rgba(255, 209, 102, 0.3);
        }
        
        .result-4star {
            border-color: #b266ff;
            box-shadow: 0 0 10px rgba(178, 102, 255, 0.3);
        }
        
        .modal-close {
            text-align: center;
        }
        
        .close-btn {
            padding: 12px 40px;
            background: linear-gradient(135deg, #4a2c8c, #6b46c1);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .close-btn:hover {
            background: linear-gradient(135deg, #5a3c9c, #7b56d1);
            transform: translateY(-2px);
        }
        
        /* åŠ¨ç”»æ•ˆæœ */
        @keyframes glow {
            0% { box-shadow: 0 0 10px rgba(255, 209, 102, 0.5); }
            50% { box-shadow: 0 0 20px rgba(255, 209, 102, 0.8); }
            100% { box-shadow: 0 0 10px rgba(255, 209, 102, 0.5); }
        }
        
        .glowing {
            animation: glow 2s infinite;
        }
        
        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 768px) {
            .result-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .pool-title {
                font-size: 28px;
            }
            
            .character-tag {
                position: relative;
                right: auto;
                top: auto;
                transform: none;
                margin-top: 20px;
                display: inline-block;
            }
            
            .banner-content {
                flex-direction: column;
                align-items: flex-start;
                padding: 25px;
            }
        }
        
        @media (max-width: 480px) {
            .result-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .draw-buttons {
                flex-direction: column;
            }
            
            .pity-counter {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- é¡¶éƒ¨æ¨ªå¹… -->
        <div class="header-banner">
            <div class="banner-bg"></div>
            <div class="banner-content">
                <div>
                    <h1 class="pool-title">ã€Œçƒ›ä¸­ç¿©å½±ã€é™å®šè·ƒè¿</h1>
                    <p class="pool-subtitle">ç±³æ¸¸è®°Â·é‡‘è€å›</p>
                    <p class="pool-time">æ´»åŠ¨æ—¶é—´ï¼š2024-01-10 12:00 - 2024-01-31 11:59</p>
                </div>
                <div class="character-tag">â˜…â˜…â˜…â˜…â˜…</div>
            </div>
        </div>
        
        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <div class="main-content">
            <!-- å·¦ä¾§é¢æ¿ -->
            <div class="left-panel">
                <!-- è§’è‰²å±•ç¤º -->
                <div class="character-panel">
                    <div class="char-image-container">
                        <div class="char-image glowing">
                            <div style="text-align: center; background: rgba(0,0,0,0.5); padding: 20px; border-radius: 10px;">
                                <i class="fas fa-user" style="font-size: 48px; margin-bottom: 15px; color: #ffd166;"></i>
                                <div>è§’è‰²å±•ç¤º</div>
                                <div style="font-size: 16px; margin-top: 10px; color: #b8b8ff;">ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®æŠ½å¡</div>
                            </div>
                        </div>
                    </div>
                    <div class="char-info">
                        <h2 class="char-name">åˆƒ Â· ä¸šç«é”‹èŠ’</h2>
                        <p class="char-desc">5â˜… æ¯ç­å‘½é€” Â· æ˜Ÿæ ¸çŒæ‰‹</p>
                        <p class="char-rarity">é£å±æ€§ Â· é™å®šè§’è‰²</p>
                    </div>
                </div>
                
                <!-- æ¦‚ç‡ä¿¡æ¯ -->
                <div class="rate-panel">
                    <h2 class="panel-title"><i class="fas fa-chart-bar"></i> æ¦‚ç‡è¯¦æƒ…</h2>
                    
                    <div class="rate-item">
                        <div class="rate-header">
                            <span class="rate-name">â˜…â˜…â˜…â˜…â˜… é™å®šè§’è‰²</span>
                            <span class="rate-value">0.600%</span>
                        </div>
                        <div class="rate-bar">
                            <div class="rate-fill rate-5"></div>
                        </div>
                    </div>
                    
                    <div class="rate-item">
                        <div class="rate-header">
                            <span class="rate-name">â˜…â˜…â˜…â˜… UPè§’è‰²</span>
                            <span class="rate-value">5.100%</span>
                        </div>
                        <div class="rate-bar">
                            <div class="rate-fill rate-4"></div>
                        </div>
                    </div>
                    
                    <div class="rate-item">
                        <div class="rate-header">
                            <span class="rate-name">â˜…â˜…â˜… å…‰é”¥</span>
                            <span class="rate-value">94.300%</span>
                        </div>
                        <div class="rate-bar">
                            <div class="rate-fill rate-3"></div>
                        </div>
                    </div>
                    
                    <!-- ä¿åº•è®¡æ•° -->
                    <div class="pity-counter">
                        <div class="pity-box">
                            <div class="pity-title">äº”æ˜Ÿä¿åº•</div>
                            <div class="pity-value" id="pity5Count">45</div>
                            <div class="pity-sub">å‰©ä½™ <span id="pity5Remain">45</span> æŠ½</div>
                        </div>
                        
                        <div class="pity-box">
                            <div class="pity-title">å››æ˜Ÿä¿åº•</div>
                            <div class="pity-value" id="pity4Count">7</div>
                            <div class="pity-sub">å‰©ä½™ <span id="pity4Remain">3</span> æŠ½</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- å³ä¾§é¢æ¿ -->
            <div class="right-panel">
                <!-- è´§å¸é¢æ¿ -->
                <div class="currency-panel">
                    <h2 class="panel-title"><i class="fas fa-coins"></i> æŠ½å¡èµ„æº</h2>
                    
                    <div class="currency-display">
                        <div class="currency-item">
                            <div class="currency-icon stellar-icon">
                                <i class="fas fa-gem"></i>
                            </div>
                            <div class="currency-info">
                                <div class="currency-name">æ˜Ÿç¼</div>
                                <div class="currency-amount" id="stellarJade">3280</div>
                            </div>
                        </div>
                        
                        <div class="currency-item">
                            <div class="currency-icon ticket-icon">
                                <i class="fas fa-ticket-alt"></i>
                            </div>
                            <div class="currency-info">
                                <div class="currency-name">æ˜Ÿè½¨ä¸“ç¥¨</div>
                                <div class="currency-amount" id="specialTicket">5</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="draw-buttons">
                        <button class="draw-btn single-draw" id="singleDraw">
                            <i class="fas fa-star"></i>
                            å•æ¬¡è·ƒè¿
                            <span style="font-size: 14px; margin-left: auto;">160 æ˜Ÿç¼</span>
                        </button>
                        
                        <button class="draw-btn ten-draw" id="tenDraw">
                            <i class="fas fa-layer-group"></i>
                            åè¿è·ƒè¿
                            <span style="font-size: 14px; margin-left: auto;">1600 æ˜Ÿç¼</span>
                        </button>
                    </div>
                </div>
                
                <!-- å¡æ± ä¿¡æ¯ -->
                <div class="character-panel">
                    <h2 class="panel-title"><i class="fas fa-users"></i> UPè§’è‰²è¯¦æƒ…</h2>
                    
                    <div style="margin-top: 20px;">
                        <div style="display: flex; align-items: center; margin-bottom: 15px; padding: 12px; background: rgba(40, 40, 80, 0.3); border-radius: 10px;">
                            <div style="width: 40px; height: 40px; background: linear-gradient(135deg, #ffd166, #ff9e6d); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 15px;">
                                <i class="fas fa-crown"></i>
                            </div>
                            <div>
                                <div style="font-weight: bold; color: #ffd166;">åˆƒ Â· 5â˜… é™å®šè§’è‰²</div>
                                <div style="font-size: 14px; color: #b8b8ff;">è·å–æ¦‚ç‡å¤§å¹…æå‡</div>
                            </div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">
                            <div style="text-align: center; padding: 12px; background: rgba(40, 40, 80, 0.3); border-radius: 10px;">
                                <div style="width: 40px; height: 40px; background: linear-gradient(135deg, #b266ff, #8a2be2); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 8px;">
                                    <i class="fas fa-user"></i>
                                </div>
                                <div style="font-size: 14px;">ä½©æ‹‰</div>
                                <div style="font-size: 12px; color: #b8b8ff;">â˜…â˜…â˜…â˜…</div>
                            </div>
                            
                            <div style="text-align: center; padding: 12px; background: rgba(40, 40, 80, 0.3); border-radius: 10px;">
                                <div style="width: 40px; height: 40px; background: linear-gradient(135deg, #b266ff, #8a2be2); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 8px;">
                                    <i class="fas fa-user"></i>
                                </div>
                                <div style="font-size: 14px;">å¨œå¡”è</div>
                                <div style="font-size: 12px; color: #b8b8ff;">â˜…â˜…â˜…â˜…</div>
                            </div>
                            
                            <div style="text-align: center; padding: 12px; background: rgba(40, 40, 80, 0.3); border-radius: 10px;">
                                <div style="width: 40px; height: 40px; background: linear-gradient(135deg, #b266ff, #8a2be2); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 8px;">
                                    <i class="fas fa-user"></i>
                                </div>
                                <div style="font-size: 14px;">é˜¿å…°</div>
                                <div style="font-size: 12px; color: #b8b8ff;">â˜…â˜…â˜…â˜…</div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 20px; padding: 15px; background: rgba(26, 26, 46, 0.8); border-radius: 10px; border-left: 4px solid #6b46c1;">
                            <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                <i class="fas fa-info-circle" style="color: #6b46c1; margin-right: 10px;"></i>
                                <div style="font-weight: bold;">ä¿åº•è§„åˆ™</div>
                            </div>
                            <div style="font-size: 14px; color: #b8b8ff; line-height: 1.5;">
                                â€¢ æ¯10æ¬¡è·ƒè¿å¿…å‡º4æ˜Ÿæˆ–ä»¥ä¸Šå¯¹è±¡<br>
                                â€¢ 90æ¬¡å†…å¿…å‡º5æ˜Ÿå¯¹è±¡<br>
                                â€¢ æœ¬æ¬¡5æ˜Ÿè§’è‰²å‡ºç°æ¦‚ç‡æå‡
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- æŠ½å¡ç»“æœå¼¹çª— -->
    <div class="modal" id="resultModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">è·ƒè¿ç»“æœ</h2>
                <p class="modal-subtitle">æœ¬æ¬¡æŠ½å¡è·å¾—ä»¥ä¸‹ç‰©å“</p>
            </div>
            
            <div class="result-grid" id="resultGrid">
                <!-- ç»“æœå°†åŠ¨æ€æ·»åŠ åˆ°è¿™é‡Œ -->
            </div>
            
            <div class="modal-close">
                <button class="close-btn" onclick="closeModal()">ç¡®è®¤</button>
            </div>
        </div>
    </div>

    <script>
        // æ¸¸æˆçŠ¶æ€
        const gameState = {
            stellarJade: 160000,
            specialTicket: 0,
            pity5: 45,
            pity4: 7,
            isGuaranteed: false,
            totalDraws: 0
        };
        
        // ç‰©å“æ± 
        const itemPool = {
            5: [
                { name: 'åˆƒ', type: 'è§’è‰²', isUP: true, emoji: 'âš”ï¸' }
            ],
            4: [
                { name: 'ä½©æ‹‰', type: 'è§’è‰²', isUP: true, emoji: 'â„ï¸' },
                { name: 'å¨œå¡”è', type: 'è§’è‰²', isUP: true, emoji: 'ğŸ’Š' },
                { name: 'é˜¿å…°', type: 'è§’è‰²', isUP: true, emoji: 'âš¡' },
                { name: 'åœäº‘', type: 'è§’è‰²', isUP: false, emoji: 'ğŸ¶' },
                { name: 'ç´ è£³', type: 'è§’è‰²', isUP: false, emoji: 'ğŸ—¡ï¸' },
                { name: 'ä¸‰æœˆä¸ƒ', type: 'è§’è‰²', isUP: false, emoji: 'ğŸ›¡ï¸' },
                { name: 'è®ºå‰‘', type: 'å…‰é”¥', isUP: false, emoji: 'ğŸ”ª' },
                { name: 'å”¯æœ‰æ²‰é»˜', type: 'å…‰é”¥', isUP: false, emoji: 'ğŸ¯' }
            ],
            3: [
                { name: 'è½®å¥‘', type: 'å…‰é”¥', emoji: 'ğŸ”„' },
                { name: 'ç¥ç€', type: 'å…‰é”¥', emoji: 'ğŸŸ ' },
                { name: 'å¤©å€¾', type: 'å…‰é”¥', emoji: 'ğŸŒ ' },
                { name: 'ç¦»å¼¦', type: 'å…‰é”¥', emoji: 'ğŸ¹' },
                { name: 'å˜‰æœ', type: 'å…‰é”¥', emoji: 'ğŸ' },
                { name: 'æ¸Šç¯', type: 'å…‰é”¥', emoji: 'â­•' }
            ]
        };
        
        // åˆå§‹åŒ–å‡½æ•°
        function init() {
            updateUI();
            
            // ç»‘å®šå•æŠ½æŒ‰é’®äº‹ä»¶
            document.getElementById('singleDraw').addEventListener('click', function() {
                if (gameState.stellarJade >= 160) {
                    gameState.stellarJade -= 160;
                    gameState.totalDraws++;
                    gameState.pity5++;
                    gameState.pity4++;
                    
                    const result = drawItem();
                    showResult([result]);
                    updateUI();
                } else if (gameState.specialTicket >= 1) {
                    gameState.specialTicket -= 1;
                    gameState.totalDraws++;
                    gameState.pity5++;
                    gameState.pity4++;
                    
                    const result = drawItem();
                    showResult([result]);
                    updateUI();
                } else {
                    alert('æ˜Ÿç¼å’Œä¸“ç¥¨ä¸è¶³ï¼');
                }
            });
            
            // ç»‘å®šåè¿æŒ‰é’®äº‹ä»¶
            document.getElementById('tenDraw').addEventListener('click', function() {
                if (gameState.stellarJade >= 1600) {
                    gameState.stellarJade -= 1600;
                    
                    const results = [];
                    let got4Star = false;
                    
                    for (let i = 0; i < 10; i++) {
                        gameState.totalDraws++;
                        gameState.pity5++;
                        gameState.pity4++;
                        
                        const result = drawItem();
                        results.push(result);
                        
                        if (result.rarity >= 4) {
                            got4Star = true;
                        }
                    }
                    
                    // åè¿ä¿åº•ï¼šç¡®ä¿è‡³å°‘ä¸€ä¸ªå››æ˜Ÿ
                    if (!got4Star) {
                        // æ›¿æ¢æœ€åä¸€ä¸ªç»“æœä¸ºå››æ˜Ÿ
                        gameState.pity4 = 0;
                        results[9] = drawItem(true);
                    }
                    
                    showResult(results);
                    updateUI();
                } else {
                    alert('æ˜Ÿç¼ä¸è¶³ï¼');
                }
            });
        }
        
        // æ›´æ–°ç•Œé¢
        function updateUI() {
            // æ›´æ–°è´§å¸æ˜¾ç¤º
            document.getElementById('stellarJade').textContent = gameState.stellarJade;
            document.getElementById('specialTicket').textContent = gameState.specialTicket;
            
            // æ›´æ–°ä¿åº•è®¡æ•°
            document.getElementById('pity5Count').textContent = gameState.pity5;
            document.getElementById('pity5Remain').textContent = 90 - gameState.pity5;
            
            document.getElementById('pity4Count').textContent = gameState.pity4;
            document.getElementById('pity4Remain').textContent = 10 - gameState.pity4;
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            const singleBtn = document.getElementById('singleDraw');
            const tenBtn = document.getElementById('tenDraw');
            
            singleBtn.disabled = gameState.stellarJade < 160 && gameState.specialTicket < 1;
            tenBtn.disabled = gameState.stellarJade < 1600;
        }
        
        // æŠ½å¡é€»è¾‘
        function drawItem(force4Star = false) {
            // äº”æ˜Ÿä¿åº•æ£€æŸ¥
            if (gameState.pity5 >= 90) {
                gameState.pity5 = 0;
                const item = getRandomItem(5);
                item.rarity = 5;
                return item;
            }
            
            // å››æ˜Ÿä¿åº•æ£€æŸ¥
            if (gameState.pity4 >= 10 || force4Star) {
                gameState.pity4 = 0;
                const item = getRandomItem(4);
                item.rarity = 4;
                return item;
            }
            
            // éšæœºæ¦‚ç‡
            const rand = Math.random() * 100;
            
            if (rand < 0.6) { // 0.6% äº”æ˜Ÿ
                gameState.pity5 = 0;
                const item = getRandomItem(5);
                item.rarity = 5;
                return item;
            } else if (rand < 0.6 + 5.1) { // 5.1% å››æ˜Ÿ
                gameState.pity4 = 0;
                const item = getRandomItem(4);
                item.rarity = 4;
                return item;
            } else { // 94.3% ä¸‰æ˜Ÿ
                const item = getRandomItem(3);
                item.rarity = 3;
                return item;
            }
        }
        
        // è·å–éšæœºç‰©å“
        function getRandomItem(rarity) {
            const pool = itemPool[rarity];
            const randomIndex = Math.floor(Math.random() * pool.length);
            return {...pool[randomIndex]}; // è¿”å›å‰¯æœ¬
        }
        
        // æ˜¾ç¤ºæŠ½å¡ç»“æœ
        function showResult(results) {
            const resultGrid = document.getElementById('resultGrid');
            resultGrid.innerHTML = '';
            
            // æ¸…ç©ºä¹‹å‰çš„åŠ¨ç”»ç±»
            document.querySelectorAll('.result-item').forEach(item => {
                item.classList.remove('revealed');
            });
            
            // æ·»åŠ æ–°çš„ç»“æœé¡¹
            results.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = `result-item result-${item.rarity}star`;
                
                // è®¾ç½®æ˜Ÿçº§æ˜¾ç¤º
                let stars = '';
                for (let i = 0; i < item.rarity; i++) {
                    stars += 'â˜…';
                }
                
                div.innerHTML = `
                    <div class="result-rarity" style="color: ${
                        item.rarity === 5 ? '#ffd166' : 
                        item.rarity === 4 ? '#b266ff' : '#66b3ff'
                    }">
                        ${stars}
                    </div>
                    <div class="result-name">${item.emoji} ${item.name}</div>
                    <div class="result-type">${item.type}${item.isUP ? ' Â· UP' : ''}</div>
                `;
                
                resultGrid.appendChild(div);
                
                // æ·»åŠ å»¶è¿Ÿæ˜¾ç¤ºåŠ¨ç”»
                setTimeout(() => {
                    div.classList.add('revealed');
                    
                    // å¦‚æœæ˜¯äº”æ˜Ÿï¼Œæ·»åŠ ç‰¹æ®Šæ•ˆæœ
                    if (item.rarity === 5) {
                        setTimeout(() => {
                            div.style.transform = 'scale(1.1)';
                            div.style.boxShadow = '0 0 25px rgba(255, 209, 102, 0.7)';
                            
                            setTimeout(() => {
                                div.style.transform = 'scale(1)';
                                div.style.boxShadow = '0 0 15px rgba(255, 209, 102, 0.3)';
                            }, 300);
                        }, 500);
                    }
                }, index * 100 + 300);
            });
            
            // æ˜¾ç¤ºå¼¹çª—
            document.getElementById('resultModal').style.display = 'flex';
            
            // å¦‚æœæœ‰äº”æ˜Ÿï¼Œæ’­æ”¾éŸ³æ•ˆæç¤ºï¼ˆæ¨¡æ‹Ÿï¼‰
            if (results.some(item => item.rarity === 5)) {
                console.log('ğŸ‰ æ­å–œè·å¾—äº”æ˜Ÿè§’è‰²ï¼');
            }
        }
        
        // å…³é—­å¼¹çª—
        function closeModal() {
            document.getElementById('resultModal').style.display = 'none';
        }
        
        // ç‚¹å‡»å¼¹çª—å¤–éƒ¨å…³é—­
        document.getElementById('resultModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });
        
        // é¡µé¢åŠ è½½å®Œæˆæ—¶åˆå§‹åŒ–
        window.addEventListener('DOMContentLoaded', init);
        
        // æ·»åŠ ä¸€äº›äº¤äº’æ•ˆæœ
        document.addEventListener('DOMContentLoaded', function() {
            // æŒ‰é’®æ‚¬åœæ•ˆæœ
            const buttons = document.querySelectorAll('.draw-btn');
            buttons.forEach(btn => {
                btn.addEventListener('mouseenter', function() {
                    if (!this.disabled) {
                        this.style.filter = 'brightness(1.2)';
                    }
                });
                
                btn.addEventListener('mouseleave', function() {
                    this.style.filter = 'brightness(1)';
                });
            });
            
            // æ¨¡æ‹Ÿè§’è‰²å±•ç¤ºåŒºåŸŸçš„åŠ¨æ€æ•ˆæœ
            const charImage = document.querySelector('.char-image');
            setInterval(() => {
                charImage.style.filter = `hue-rotate(${Math.random() * 20}deg) brightness(${0.9 + Math.random() * 0.2})`;
            }, 3000);
        });
    </script>
</body>
</html>