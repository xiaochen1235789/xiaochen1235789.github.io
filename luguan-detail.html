<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>é¹¿ç®¡ Â· æ•°å€¼é¡µ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" 
      href="https://xiaochen1235789.github.io/images/wangzhantupian.png" 
      type="image/png">
<style>
:root{
  --bg:#121212;
  --surface:#1a1a1a;
  --card:#202020;
  --primary:#d3af37;   /* ç‰è¡¡é‡‘ */
  --second:#81c784;
  --text:#e0e0e0;
  --sub:#99aabb;
  --line:#333;
  --radius:6px;
  --tran:.3s ease;
}
*{margin:0;padding:0;box-sizing:border-box;font-family:"Microsoft YaHei",sans-serif;}
body{
  background:var(--bg);
  color:var(--text);
  padding-bottom: 90px !important;
  margin:0;
  min-height:100vh;
}
a{color:var(--second);text-decoration:none;}
img{max-width:100%;display:block;}
/* è¯­ä¹‰åŒ–æ ‡ç­¾åŸºç¡€æ ·å¼ */
header {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 16px;
}
main {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 16px;
}
footer {
    max-width: 1200px;
    margin: 20px auto 0;
    padding: 12px 16px;
    color: var(--text-secondary);
    font-size: 0.8rem;
    text-align: center;
    border-top: 1px solid #3d725f;
}
/* é¡¶éƒ¨è¿”å›æ  */
.top-bar{
    display:flex;
    align-items:center;
    padding:12px 16px;
    background:var(--surface);
    border-bottom:1px solid var(--line);
    border-radius:var(--radius);
    margin-bottom:16px;
}
.top-bar .back{font-size:1.2rem;margin-right:12px;}
.top-bar .title{font-size:1.1rem;font-weight:600;}
/* ç«‹ç»˜åŒº */
.art-box{
    position:relative;
    background:#2a2a2a;
    border-radius:var(--radius);
    overflow:hidden;
    margin-bottom:16px;
}
.art-box img{width:100%;aspect-ratio:16/9;object-fit:cover;}
.name-tag{position:absolute;bottom:12px;left:16px;}
.ch-name{font-size:1.6rem;font-weight:600;color:#fff;text-shadow:0 0 4px #000;}
.tags{display:flex;gap:6px;margin-top:4px;}
.tag{
    background:rgba(0,0,0,.6);
    color:var(--primary);
    padding:2px 8px;
    border-radius:var(--radius);
    font-size:.7rem;
}
/* ç­‰çº§è°ƒèŠ‚ */
.level-block{
    background:var(--card);
    margin:0 0 16px;
    padding:12px 16px;
    border-radius:var(--radius);
}
.level-header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:8px;
}
.level-label{color:var(--sub);font-size:.9rem;}
.level-value{font-size:1.2rem;font-weight:600;color:var(--primary);}
.level-slider{
    width:100%;
    -webkit-appearance:none;
    height:4px;
    background:var(--line);
    border-radius:2px;
    outline:none;
}
.level-slider::-webkit-slider-thumb{
    -webkit-appearance:none;
    width:16px;
    height:16px;
    background:var(--primary);
    border-radius:50%;
    cursor:pointer;
}
/* æŠ€èƒ½æŠ˜å å— */
.skill-block{
    background:var(--card);
    margin:0 0 12px;
    border-radius:var(--radius);
}
.skill-header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:12px 16px;
    cursor:pointer;
}
.skill-header:hover{background:rgba(255,255,255,.05);}
.skill-name{font-weight:500;}
.skill-arrow{transition:transform var(--tran);}
.skill-body{
    max-height:0;
    overflow:hidden;
    transition:max-height var(--tran);
}
.skill-body.open{max-height:600px;}
.skill-content{
    padding:0 16px 12px;
    font-size:.85rem;
    color:var(--sub);
}
.skill-table{
    width:100%;
    border-collapse:collapse;
    font-size:.8rem;
    margin-top:6px;
}
.skill-table th,.skill-table td{
    padding:4px 2px;
    text-align:center;
    border-bottom:1px solid var(--line);
}
.skill-table th{color:var(--primary);}
/* ä¸“æ­¦ä¸å‘½åº§æ¨¡å—ç‰¹æ®Šæ ·å¼ */
.weapon-block, .constellation-block {
    background: var(--card);
    margin: 16px 0;
    padding: 12px 16px;
    border-radius: var(--radius);
}
.module-title {
    font-size: 1rem;
    color: var(--text-highlight);
    margin-bottom: 12px;
    display: flex;
    align-items: center;
    gap: 8px;
}
.module-title::before {
    content: "ğŸ“Œ";
}
/* æ’­æ”¾å™¨iframeæ ·å¼ */
#musicPlayerIframe {
    display: block !important;
    visibility: visible !important;
    height: 90px !important;
    width: 100% !important;
    z-index: 99999 !important;
    position: fixed !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    border: none !important;
    background: transparent !important;
    overflow: visible !important;
}
</style>
</head>
<body>
    <!-- è¯­ä¹‰åŒ–å¤´éƒ¨ï¼šè¿”å›å¯¼èˆª -->
    <header>
        <div class="top-bar">
            <a class="back" href="index.html">â€¹</a>
            <span class="title">é¹¿ç®¡ Â· æ•°å€¼é¡µ</span>
        </div>
    </header>

    <!-- è¯­ä¹‰åŒ–ä¸»ä½“ï¼šè§’è‰²è¯¦æƒ…å†…å®¹ -->
    <main>
        <!-- ç«‹ç»˜ä¸åŸºç¡€ä¿¡æ¯ -->
        <section class="character-header">
            <div class="art-box">
                <img src="https://xiaochen1235789.github.io/images/changjinglu.png" alt="é¹¿é¦†ç«‹ç»˜">
                <div class="name-tag">
                    <div class="ch-name">é¹¿ç®¡</div>
                    <div class="tags">
                        <span class="tag">å·¡çŒ</span>
                        <span class="tag">é£</span>
                        <span class="tag">é™å®šäº”æ˜Ÿ</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- ç­‰çº§è°ƒèŠ‚æ¨¡å— -->
        <section class="level-section">
            <div class="level-block">
                <div class="level-header">
                    <span class="level-label">å½“å‰ç­‰çº§</span>
                    <span class="level-value" id="levelDisplay">Lv.1</span>
                </div>
                <input type="range" class="level-slider" id="levelRange" min="1" max="12" value="1">
            </div>
        </section>

        <!-- æŠ€èƒ½æ¨¡å— -->
        <section class="skills-section">
            <div class="skill-block">
                <div class="skill-header" onclick="toggleSkill(this)">
                    <span class="skill-name">æ™®æ”» Â· è¿…é£æ–©</span>
                    <span class="skill-arrow" id="arrow1">â–¼</span>
                </div>
                <div class="skill-body" id="body1">
                    <div class="skill-content">
                        å¯¹æ•Œæ–¹å•ä½“é€ æˆç­‰åŒäº <span id="val1">50%</span> æ”»å‡»åŠ›çš„é£å±æ€§ä¼¤å®³ã€‚
                        <table class="skill-table">
                            <thead><tr><<th>éšè—æ•°å€¼</th><th>æ•°å€¼</th></tr></thead>
                            <tbody>
                                <tr><td>å‰ŠéŸ§</td><td>å•ä½“10</td></tr>
                                <tr><td>æˆ˜æŠ€ç‚¹</td><td>+1</td></tr>
                                <tr><td>èƒ½é‡</td><td>+20</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="skill-block">
                <div class="skill-header" onclick="toggleSkill(this)">
                    <span class="skill-name">æˆ˜æŠ€ Â· é£ä¹‹æŒ‘è¡…</span>
                    <span class="skill-arrow" id="arrow2">â–¼</span>
                </div>
                <div class="skill-body" id="body2">
                    <div class="skill-content">
                        å¯¹æ•Œæ–¹å•ä½“é€ æˆç­‰åŒäº <span id="val2">150%</span> æ”»å‡»åŠ›çš„é£å±æ€§ä¼¤å®³ï¼Œæš´å‡»æ—¶ 100% æ¦‚ç‡é™ä½ç›®æ ‡é˜²å¾¡ 35%ï¼ŒæŒç»­ 2 å›åˆã€‚
                        <table class="skill-table">
                            <thead><tr><<th>éšè—æ•°å€¼</th><th>æ•°å€¼</th></tr></thead>
                            <tbody>
                                <tr><td>å‰ŠéŸ§</td><td>å•ä½“20</td></tr>
                                <tr><td>æˆ˜æŠ€ç‚¹</td><td>-1</td></tr>
                                <tr><td>èƒ½é‡</td><td>+30</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="skill-block">
                <div class="skill-header" onclick="toggleSkill(this)">
                    <span class="skill-name">ç»ˆç»“æŠ€ Â· ç‹‚é£ç»ˆç»“</span>
                    <span class="skill-arrow" id="arrow3">â–¼</span>
                </div>
                <div class="skill-body" id="body3">
                    <div class="skill-content">
                        å¯¹æ•Œæ–¹å•ä½“é€ æˆç­‰åŒäº <span id="val3">300%</span> æ”»å‡»åŠ›çš„é£å±æ€§ä¼¤å®³ï¼›è‹¥æ”»å‡»çš„æ•Œæ–¹ç›®æ ‡å¤„äºè´Ÿé¢çŠ¶æ€æ—¶æœ¬æ¬¡ä¼¤å®³å€ç‡é¢å¤–æå‡ <span id="val4">100%</span>ã€‚
                        <table class="skill-table">
                            <thead><tr><th>éšè—æ•°å€¼</th><th>æ•°å€¼</th></tr></thead>
                            <tbody>
                                <tr><td>å‰ŠéŸ§</td><td>30</td></tr>
                                <tr><td>èƒ½é‡</td><td>-120</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="skill-block">
                <div class="skill-header" onclick="toggleSkill(this)">
                    <span class="skill-name">å¤©èµ‹ Â· çŒæ€å¼ºåŒ–</span>
                    <span class="skill-arrow" id="arrow4">â–¼</span>
                </div>
                <div class="skill-body" id="body4">
                    <div class="skill-content">
                        å½“æˆ‘æ–¹ç›®æ ‡/é¹¿é¦†å‡»æ€æ•Œæ–¹ç›®æ ‡åï¼Œä½¿é¹¿é¦†çš„é£å±æ€§å±æ€§ç©¿é€æé«˜<span id="val5">3.3%</span>ï¼Œæœ€å¤šæé«˜22%ã€‚æ”»å‡»åŠ›æé«˜5%ï¼Œæœ€å¤šæé«˜50%
                        <table class="skill-table">
                            <thead><tr><<th>éšè—æ•°å€¼</th><th>æ•°å€¼</th></tr></thead>
                            <tbody>
                                <tr><td>å‰ŠéŸ§</td><td>0</td></tr>
                                <tr><td>èƒ½é‡</td><td>æ— å˜åŒ–</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <!-- ä¸“æ­¦æ¨¡å— -->
        <section class="weapon-section">
            <div class="weapon-block">
                <h3 class="module-title">ä¸“æ­¦ Â· å¿«ä¹çš„è·¯ä¸€å¤©</h3>
                <div style="margin-bottom:8px;">å å½±ç­‰çº§ï¼š
                    <select id="weaponLv" onchange="updateWeapon()">
                        <option value="1">â… </option>
                        <option value="2">â…¡</option>
                        <option value="3">â…¢</option>
                        <option value="4">â…£</option>
                        <option value="5">â…¤</option>
                    </select>
                </div>
                <ul style="list-style:none;font-size:.85rem;line-height:1.6;">
                    <li>ä½¿è£…å¤‡è€…çš„æš´å‡»ç‡æé«˜ <span id="wCrit" class="w-val">20</span>%</li>
                    <li>å½“è£…å¤‡è€…åœ¨æˆ˜æ–—ä¸­é€Ÿåº¦å¤§äº100æ—¶ï¼Œæ¯è¶…è¿‡6ç‚¹ï¼Œå¼€å±€å°±å¯ä»¥è·å¾—1å±‚[æš—æ¶Œ]ï¼Œæ¯å±‚[æš—æ¶Œ]ä½¿è£…å¤‡è€…æ™®æ”»å’Œæˆ˜æŠ€é€ æˆçš„ä¼¤å®³æé«˜ <span id="wDmg" class="w-val">6</span>%</li>
                    <li>ç»ˆç»“æŠ€æš´å‡»ä¼¤å®³æé«˜ <span id="wCd" class="w-val">16</span>%ï¼Œæœ€å¤šå åŠ 10æ¬¡</li>
                </ul>
            </div>
        </section>

        <!-- å‘½åº§æ¨¡å— -->
        <section class="constellation-section">
            <div class="constellation-block">
                <h3 class="module-title">å‘½ä¹‹åº§</h3>
                <table class="skill-table" style="margin:0;">
                    <thead><tr><th>å±‚æ•°</th><th>åç§°</th><<th>æ•ˆæœ</th></tr></thead>
                    <tbody>
                        <tr><td>1å‘½</td><td>ç–¾é£è¿½å½±</td><td>æ”»å‡»æ•Œæ–¹ç›®æ ‡æ—¶ï¼Œè‹¥æ•Œæ–¹ç›®æ ‡ç”Ÿå‘½â‰¥20%ï¼Œå—åˆ°æ¥è‡ªé¹¿é¦†çš„ä¼¤å®³æé«˜<span class="const-val" data-lv="1">50%</span></td></tr>
                        <tr><td>2å‘½</td><td>æ—‹åˆƒç‹©é­‚</td><td>å¯¹æ‹¥æœ‰è´Ÿé¢æ•ˆæœçš„æ•Œæ–¹ç›®æ ‡é€ æˆçš„æš´å‡»ç‡æé«˜<span class="const-val" data-lv="2">18%</span>ï¼Œæ”»å‡»çš„æ•Œæ–¹ç›®æ ‡æ¯æ‹¥æœ‰1ä¸ªè´Ÿé¢æ•ˆæœå—åˆ°æ”»å‡»çš„æš´å‡»ä¼¤å®³æé«˜<span class="const-val" data-lv="2">24%</span>ï¼Œæœ€å¤šå åŠ è‡³144%</td></tr>
                        <tr><td>3å‘½</td><td>è£‚ç©ºç ´éšœ</td><td>
                            æ™®æ”»ç­‰çº§+<span class="const-val" data-lv="3">1</span>ï¼Œæœ€å¤šä¸è¶…è¿‡<span class="const-val" data-lv="3">10</span>çº§
                            <br>
                            å¤©èµ‹ç­‰çº§+<span class="const-val" data-lv="3">2</span>ï¼Œæœ€å¤šä¸è¶…è¿‡<span class="const-val" data-lv="3">15</span>çº§
                        </td></tr>
                        <tr><td>4å‘½</td><td>ç ´æ™“ç‹©é£</td><td>
                            æ¶ˆç­æ•Œæ–¹ç›®æ ‡æ—¶ï¼Œè‡ªèº«æ¢å¤<span class="const-val" data-lv="4">20</span>ç‚¹èƒ½é‡å¹¶ç«‹å³è·å¾—1ä¸ª<span style="color:orange;">é¢å¤–å›åˆ</span>
                            <br><span style="color:orange;">é¢å¤–å›åˆï¼šè·å¾—1ä¸ªä¸æ¶ˆè€—å›åˆæ•°çš„é¢å¤–å›åˆï¼Œåœ¨æ­¤å›åˆä¸­æ— æ³•æ’å…¥æ–½æ”¾ç»ˆç»“æŠ€</span>
                        </td></tr>
                        <tr><td>5å‘½</td><td>é£ç‹©é“­çº¹</td><td>
                            æˆ˜æŠ€ç­‰çº§+<span class="const-val" data-lv="5">2</span>ï¼Œæœ€å¤šä¸è¶…è¿‡<span class="const-val" data-lv="5">15</span>çº§
                            <br>
                            ç»ˆç»“æŠ€ç­‰çº§+<span class="const-val" data-lv="5">2</span>ï¼Œæœ€å¤šä¸è¶…è¿‡<span class="const-val" data-lv="5">15</span>çº§
                        </td></tr>
                        <tr><td>6å‘½</td><td>é€å½±é£åˆƒ</td><td>æ™®æ”»/æˆ˜æŠ€/ç»ˆç»“æŠ€æŠ€èƒ½å€ç‡æå‡<span class="const-val" data-lv="6">96%</span>ï¼Œé€ æˆä¼¤å®³æ—¶æ— è§†æ•Œæ–¹ç›®æ ‡<span class="const-val" data-lv="6">24%</span>å…¨å±æ€§æŠ—æ€§</td></tr>
                    </tbody>
                </table>
            </div>
        </section>
    </main>

    <!-- è¯­ä¹‰åŒ–é¡µè„šï¼šç‰ˆæƒä¿¡æ¯ -->
    <footer>
        <p>Â© 2025 å…­å“¥è£è€€WIKI | å¤§éƒ¨åˆ†è§’è‰²ä¸ºè™šæ„ï¼Œä»…ä¾›å¨±ä¹å‚è€ƒ</p>
    </footer>

    <!-- æ’­æ”¾å™¨iframeï¼šè·¨é¡µæ— ç¼æ’­æ”¾ -->
    <iframe 
        id="musicPlayerIframe"
        src="music-player.html"
        style="
            display: block !important;
            visibility: visible !important;
            height: 90px !important;
            width: 100% !important;
            z-index: 99999 !important;
            position: fixed !important;
            bottom: 0 !important;
            left: 0 !important;
            right: 0 !important;
            border: none !important;
            background: transparent !important;
            overflow: visible !important;
        "
        frameborder="0"
        scrolling="no"
        onload="resizePlayerIframe(this)"
    ></iframe>

    <script>
        // 1. ç­‰çº§æ•°å€¼è®¡ç®—
        const base = [50, 150, 300, 100, 3.3];   // 1çº§åŸºç¡€å€¼
        const step = [10, 20, 36, 10, 0.1];    // æ¯çº§å¢é‡
        const spans = ['val1','val2','val3','val4','val5'];
        const range = document.getElementById('levelRange');
        const display = document.getElementById('levelDisplay');

        function updateLevel(lv){
            display.textContent = 'Lv.'+lv;
            base.forEach((b,i)=>{
                const val = b + step[i]*(lv-1);
                const el  = document.getElementById(spans[i]);
                el.textContent = val+'%';
                // ç­‰çº§é«˜äº®é¢œè‰²
                const colors = Array(12).fill('#d3af37'); // 1-12çº§ç»Ÿä¸€é‡‘è‰²
                el.style.color = colors[lv - 1];
            });
        }

        range.addEventListener('input', e=>{
            updateLevel(e.target.value);
        });
        updateLevel(1); // åˆå§‹åŒ–

        // 2. æŠ€èƒ½æŠ˜å åŠŸèƒ½
        function toggleSkill(header){
            const body = header.nextElementSibling;
            const arrow = header.querySelector('.skill-arrow');
            body.classList.toggle('open');
            arrow.textContent = body.classList.contains('open')?'â–²':'â–¼';
        }

        // 3. ä¸“æ­¦æ•°å€¼è®¡ç®—
        const weaponData = {
            crit: [20,22.5,25,27.5,30],
            dmg:  [6,8,10,12,14],
            cd:   [16,18,20,22,24]
        };

        function updateWeapon(){
            const lv = document.getElementById('weaponLv').value;
            document.getElementById('wCrit').textContent = weaponData.crit[lv-1];
            document.getElementById('wDmg').textContent  = weaponData.dmg[lv-1];
            document.getElementById('wCd').textContent   = weaponData.cd[lv-1];
            // ä¸“æ­¦é«˜äº®
            const colors = ['#d3af37','#d3af37','#d3af37','#d3af37','#d3af37'];
            document.querySelectorAll('.w-val').forEach(el=>{
                el.style.color = colors[lv-1];
            });
        }

        // 4. å‘½åº§é«˜äº®
        function colorConstellation(){
            const colors = ['#d3af37','#d3af37','#d3af37','#d3af37','#d3af37','#d3af37'];
            document.querySelectorAll('.const-val').forEach(el=>{
                const lv = Number(el.dataset.lv);
                el.style.color = colors[lv-1];
            });
        }

        // 5. æ’­æ”¾å™¨é«˜åº¦è‡ªé€‚åº”
        function resizePlayerIframe(iframe) {
            try {
                const playerHeight = iframe.contentWindow.document.querySelector('.mini-music-player').offsetHeight;
                const progressHeight = iframe.contentWindow.document.querySelector('.player-progress').offsetHeight;
                iframe.style.height = (playerHeight + progressHeight + 10) + 'px';
            } catch (err) {
                iframe.style.height = '90px';
            }
        }

        // 6. è·¨é¡µæ’­æ”¾çŠ¶æ€åŒæ­¥ï¼ˆå¹¿æ’­ç›‘å¬ï¼‰
        const bc = new BroadcastChannel('music_player_broadcast');
        bc.onmessage = (e) => {
            if (e.data.type === 'SYNC_STATE') {
                const iframe = document.getElementById('musicPlayerIframe');
                if (iframe) {
                    iframe.contentWindow.postMessage({ type: 'SYNC_STATE', state: e.data.state }, '*');
                }
            }
        };

        // 7. é¡µé¢åŠ è½½åˆå§‹åŒ–
        window.addEventListener('load', () => {
            updateWeapon();
            colorConstellation();
            
            // æ¢å¤æ’­æ”¾å™¨çŠ¶æ€
            const iframe = document.getElementById('musicPlayerIframe');
            setTimeout(() => {
                try {
                    iframe.contentWindow.postMessage({ type: 'RESTORE_PLAY_STATE' }, '*');
                } catch (err) {}
            }, 300);
        });

        // 8. ç›‘å¬æ’­æ”¾å™¨çŠ¶æ€åé¦ˆ
        window.addEventListener('message', (e) => {
            if (e.data.type === 'PLAY_STATE_UPDATED') {
                console.log('å½“å‰æ’­æ”¾çŠ¶æ€:', e.data.state.isPlaying);
            }
        });
    </script>
</body>
</html>
