<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>梦 · 数值页</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" 
      href="https://xiaochen1235789.github.io/images/wangzhantupian.png" 
      type="image/png">
<style>
:root{
  --bg:#121212;
  --surface:#1a1a1a;
  --card:#202020;
  --primary:#d3af37;   /* 玉衡金 */
  --second:#81c784;
  --text:#e0e0e0;
  --sub:#99aabb;
  --line:#333;
  --radius:6px;
  --tran:.3s ease;
}
*{margin:0;padding:0;box-sizing:border-box;font-family:"Microsoft YaHei",sans-serif;}
body{background:var(--bg);color:var(--text);padding-bottom: 90px !important;}
a{color:var(--second);text-decoration:none;}
img{max-width:100%;display:block;}
/* 顶部返回栏 */
.top-bar{display:flex;align-items:center;padding:12px 16px;background:var(--surface);border-bottom:1px solid var(--line);}
.top-bar .back{font-size:1.2rem;margin-right:12px;}
.top-bar .title{font-size:1.1rem;font-weight:600;}
/* 立绘区 */
.art-box{position:relative;background:#2a2a2a;}
.art-box img{width:100%;aspect-ratio:16/9;object-fit:cover;}
.name-tag{position:absolute;bottom:12px;left:16px;}
.ch-name{font-size:1.6rem;font-weight:600;color:#fff;text-shadow:0 0 4px #000;}
.tags{display:flex;gap:6px;margin-top:4px;}
.tag{background:rgba(0,0,0,.6);color:var(--primary);padding:2px 8px;border-radius:var(--radius);font-size:.7rem;}
/* 等级调节 */
.level-block{background:var(--card);margin:12px 16px;padding:12px 16px;border-radius:var(--radius);}
.level-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;}
.level-label{color:var(--sub);font-size:.9rem;}
.level-value{font-size:1.2rem;font-weight:600;color:var(--primary);}
.level-slider{width:100%;-webkit-appearance:none;height:4px;background:var(--line);border-radius:2px;outline:none;}
.level-slider::-webkit-slider-thumb{-webkit-appearance:none;width:16px;height:16px;background:var(--primary);border-radius:50%;cursor:pointer;}
/* 技能折叠块 */
.skill-block{background:var(--card);margin:0 16px 12px;border-radius:var(--radius);}
.skill-header{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;}
.skill-header:hover{background:rgba(255,255,255,.05);}
.skill-name{font-weight:500;}
.skill-arrow{transition:transform var(--tran);}
.skill-body{max-height:600px;overflow:visible;}/* 强制显示，去掉折叠动画 */
.skill-content{padding:0 16px 12px;font-size:.85rem;color:var(--sub);}
.skill-table{width:100%;border-collapse:collapse;font-size:.8rem;margin-top:6px;}
.skill-table th,.skill-table td{padding:4px 2px;text-align:center;border-bottom:1px solid var(--line);}
.skill-table th{color:var(--primary);}
/* 12级传说色渐变样式 */
.legend-text{
  background: linear-gradient(45deg, #ffd700, #ffA500);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  font-weight: 600;
}
/* 播放器iframe样式 */
#musicPlayerIframe {
    display: block !important;
    visibility: visible !important;
    height: 400px !important;
    width: 100% !important;
    z-index: 99999 !important;
    position: fixed !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    border: none !important;
    background: transparent !important;
    overflow: visible !important;
}
</style>
</head>
<body>
<div class="top-bar">
  <a class="back" href="index.html">‹</a>
  <span class="title">梦 · 数值页</span>
</div>
<!-- 立绘 + 名字 + 标签 -->
<div class="art-box">
  <img src="https://xiaochen1235789.github.io/images/zanwutupian.png" alt="皮哥立绘">
  <div class="name-tag">
    <div class="ch-name">梦</div>
    <div class="tags">
      <span class="tag">命途:虚无</span>
      <span class="tag">属性:风</span>
      <span class="tag">定位:DOT主C</span>
      <span class="tag">稀有度:限定五星</span>
    </div>
  </div>
</div>
<!-- 等级滑块 -->
<div class="level-block">
  <div class="level-header">
    <span class="level-label">当前等级</span>
    <span class="level-value" id="levelDisplay">Lv.1</span>
  </div>
  <input type="range" class="level-slider" id="levelRange" min="1" max="12" value="1">
</div>
<!-- 技能区：普攻、战技、终结技、天赋改为直接显示 -->
<div class="skill-block">
  <div class="skill-header">
    <span class="skill-name">普攻 · 旋梦刃(满级7级)</span>
    <span class="skill-arrow" id="arrow1"></span>
  </div>
  <div class="skill-body" id="body1">
    <div class="skill-content">
      对指定敌方目标造成等同于梦<span id="val1">50%</span> 攻击力的风属性伤害。
      <table class="skill-table">
        <thead><tr><th>隐藏数值</th><th>数值</th></tr></thead>
        <tbody>
          <tr><td>削韧</td><td>10</td></tr>
          <tr><td>战技点</td><td>+1</td></tr>
          <tr><td>能量变化</td><td>+20</td></tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
<div class="skill-block">
  <div class="skill-header">
    <span class="skill-name">战技 · 初入梦域(满级12级)</span>
    <span class="skill-arrow" id="arrow2"></span>
  </div>
  <div class="skill-body" id="body2">
    <div class="skill-content">
      对指定敌方目标单体及其相邻目标造成等同于梦<span id="val2">133%</span>攻击力的风属性伤害，同时有<span style="color:orange; font-size: 16px;">100%</span>的固定概率使目标与相邻目标陷入<span style="color:orange; font-size: 14px;">3</span>层<span style="color:orange; font-size: 14px;">[梦乡]</span>，<span style="color:orange; font-size: 14px;">[梦乡]</span>使敌人目标受到的持续伤害提高<span style="color:orange; font-size: 14px;">5%</span>，最多叠加<span style="color:orange; font-size: 14px;">9</span>层，此外有<span style="color:orange; font-size: 14px;">60%</span>的基础概率使目标与相邻目标防御力降低<span id="val3">24%</span>，持续3回合。
      <table class="skill-table">
        <thead><tr><th>隐藏数值</th><th>数值</th></tr></thead>
        <tbody>
          <tr><td>削韧</td><td>单体20</td></tr>
          <tr><td>战技点</td><td>-1</td></tr>
          <tr><td>能量变化</td><td>+40</td></tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
<div class="skill-block">
  <div class="skill-header">
    <span class="skill-name">终结技 · 幻梦湮灭(满级12级)</span>
    <span class="skill-arrow" id="arrow3"></span>
  </div>
  <div class="skill-body" id="body3">
    <div class="skill-content">
      使敌方全体陷入<span style="color:orange; font-size: 14px;">[幻梦]</span>状态，持续2回合。<span style="color:orange; font-size: 14px;">幻梦</span>状态下，敌方目标自身回合内受到的持续伤害倍率提高<span id="val4">33.2%</span>，且当敌方目标处于<span style="color:orange; font-size: 14px;">[幻梦]</span>状态时，也会被视为同时陷入了风化、裂伤、灼烧、触电状态，并且<span style="color:orange; font-size: 14px;">[幻梦]</span>每回合开始造成伤害后不会重置层数。<span style="color:orange; font-size: 14px;">[幻梦]</span>不会重置层数的效果在<span style="color:orange; font-size: 14px;">[幻梦]</span>状态持续时间内最多触发<span style="color:orange; font-size: 14px;">2</span>次，再次陷入<span style="color:orange; font-size: 14px;">[幻梦]</span>状态会刷新触发次数。对敌方全体造成等同于梦<span id="val5">152%</span>攻击力的风属性伤害，若敌方目标处于持续伤害状态，其当前承受的所有持续伤害立即产生相当于原伤害<span id="val6">111%</span>的伤害
      <table class="skill-table">
        <thead><tr><th>隐藏数值</th><th>数值</th></tr></thead>
        <tbody>
          <tr><td>削韧</td><td>群体30</td></tr>
          <tr><td>能量变化</td><td>-110</td></tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
<div class="skill-block">
  <div class="skill-header">
    <span class="skill-name">天赋 · 缠梦之困(满级12级)</span>
    <span class="skill-arrow" id="arrow4"></span>
  </div>
  <div class="skill-body" id="body4">
    <div class="skill-content">
      梦使用普攻、战技、终结技击中敌人时，有<span style="color:orange; font-size: 14px;">70%</span>的基础概率对其施加<span style="color:orange; font-size: 14px;">1</span>层<span style="color:orange; font-size: 14px;">【酣眠】</span>，1层时使敌人受到的持续伤害提高<span style="color:orange; font-size: 14px;">20.0%</span>，此后每叠加1层提高<span style="color:orange; font-size: 14px;">5%</span>。<span style="color:orange; font-size: 14px;">【酣眠】</span>最多叠加8层，持续2回合。当敌方目标处于【酣眠】状态时，也会被视为同时陷入了<span style="color:orange; font-size: 14px;">【纠缠】</span>状态，，每回合开始时受到等同于梦<span id="val7">225.5%</span>攻击力的量子属性持续伤害。
      <table class="skill-table">
        <thead><tr><th>隐藏数值</th><th>数值</th></tr></thead>
        <tbody>
          <tr><td>/</td><td>/</td></tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
<!-- ===== 额外能力 ===== -->
<div class="skill-block">
  <div class="skill-content" style="font-size: 16px;">
    <span class="skill-name" style="font-size: 18px;"></span>
    <br>
    额外能力1：<span style="color:orange; font-size: 16px;">梦涟侵蚀</span>
    <br>
    使用战技后若敌方目标处于持续伤害状态，其当前承受的所有持续伤害立即产生相当于原伤害<span style="color:orange; font-size: 14px;">120%</span>的伤害。
    <br>
    <br>
    额外能力2：<span style="color:orange; font-size: 16px;">深梦触眠</span>
    <br>
    施放战技攻击陷入风化、裂伤、灼烧、触电状态的指定敌方单体后，分别各有<span style="color:orange; font-size: 14px;">60%</span>的基础概率额外使目标陷入<span style="color:orange; font-size: 14px;">1</span>层<span style="color:orange; font-size: 14px;">【酣眠】</span>。
    <br>
    <br>
    额外能力3：<span style="color:orange; font-size: 16px;">初梦息能</span>
    <br>
    自身回合开始时，立即恢复<span style="color:orange; font-size: 14px;">20</span>点能量。
  </div>
</div>
<!-- ===== 专武 ===== -->
<div class="skill-block" style="margin:12px 16px;">
  <div class="skill-header" style="cursor:default;">
    <span class="skill-name">专武 · 梦影叠障</span>
  </div>
  <div class="skill-content" style="padding:12px 16px 0;">
    <div style="margin-bottom:8px;">叠影等级：
      <select id="weaponLv" onchange="updateWeapon()">
        <option value="1">Ⅰ</option>
        <option value="2">Ⅱ</option>
        <option value="3">Ⅲ</option>
        <option value="4">Ⅳ</option>
        <option value="5">Ⅴ</option>
      </select>
    </div>
    <ul style="list-style:none;font-size:.85rem;line-height:1.6;">
      <li>使装备者效果命中提高 <span id="wCrit" class="w-val">40</span>%。</li>
      <li>装备者每次施放攻击后，速度提高 <span id="wDmg" class="w-val">4.0</span>%，最多提高<span style="color:orange; font-size: 14px;">5</span>次，装备者对陷入风化、灼烧、触电、裂伤状态的敌方目标造成伤害时，分别获得<span style="color:orange; font-size: 14px;">1</span>层【好眠】，最多叠加<span style="color:orange; font-size: 14px;">5</span>层。单场战斗中，每种持续伤害状态类型仅可叠加<span style="color:orange; font-size: 14px;">1</span>次<span style="color:orange; font-size: 14px;">【好眠】</span>效果。</li>
      <li>每层【好眠】使装备者的攻击力提高 <span id="wCd" class="w-val">10</span>%。造成的持续伤害无视敌方目标<span style="color:orange; font-size: 14px;">24%</span>防御力</li>
    </ul>
  </div>
</div>
<!-- ===== 命座 ===== -->
<div class="skill-block" style="margin:12px 16px;">
  <div class="skill-header" style="cursor:default;">
    <span class="skill-name">命之座</span>
  </div>
  <div class="skill-content" style="padding:12px 16px 0;">
    <table class="skill-table" style="margin:0;">
      <thead><tr><th>层数</th><th>名称</th><th>效果</th></tr></thead>
      <tbody>
      
      
        <tr><td><br>1命</td><td><br>虚无侵蚀</td><td><br>当梦处于可战斗状态时，处于风化、裂伤、灼烧、触电状态下的敌方目标的全属性抗性降低<span class="const-val" data-lv="1">20%</span>，攻击处于风化、裂伤、灼烧、触电状态下的敌方目标持续伤害倍率提高<span class="const-val" data-lv="1">20%</span>，每当敌人受到1次持续伤害时为自身回复<span class="const-val" data-lv="1">2.0</span>点能量<br></td></tr>
        
        
        <tr><td><br>2命</td><td><br>梦魇叠加</td><td><br>我方目标对处于<span class="const-val" data-lv="1">【酣眠】</span>状态的敌方目标造成的持续伤害倍率提高<span class="const-val" data-lv="1">30%</span>。每当触发天赋效果使敌方目标陷入<span class="const-val" data-lv="1">【酣眠】</span>状态时，使本次叠加的<span class="const-val" data-lv="1">【酣眠】</span>层数额外提高<span class="const-val" data-lv="1">1</span>层，使用战技后可解除自身<span class="const-val" data-lv="1">1</span>个负面效果。<br></td></tr>
        
        
        <tr><td><br>3命</td><td><br>梦刃觉醒</td><td>
        <br>普攻等级+<span class="const-val" data-lv="3">1</span>，最多不超过<span class="const-val" data-lv="3">10</span>级
      <br>
      天赋等级+<span class="const-val" data-lv="3">2</span>，最多不超过<span class="const-val" data-lv="3">15</span>级<br></td></tr>
      
      
        <tr><td><br>4命</td><td><br>虚境压制</td><td><br>【酣眠】状态下的敌方目标造成的伤害降低<span class="const-val" data-lv="1">40%</span>，并且受到的持续伤害提高<span class="const-val" data-lv="1">25%</span><br></td></tr>
        
        
        <tr><td><br>5命</td><td><br>梦域强化</td><td>
        <br>战技等级+<span class="const-val" data-lv="5">2</span>，最多不超过<span class="const-val" data-lv="5">15</span>级
        <br>
        终结技等级+<span class="const-val" data-lv="5">2</span>，最多不超过<span class="const-val" data-lv="5">15</span>级<br></td></tr>
        
        
        <tr><td><br>6命</td><td><br>梦烬传承</td><td><br>敌方目标被消灭时，恢复自身<span class="const-val" data-lv="1">12</span>点能量并将持有的<span class="const-val" data-lv="1">【酣眠】</span>会叠加给场上存活的<span class="const-val" data-lv="1">【酣眠】</span>层数最低的敌人。<span class="const-val" data-lv="1">【酣眠】</span>的层数上限提升至<span class="const-val" data-lv="1">16</span>层，每层【酣眠】额外使目标的全属性抗性降低<span class="const-val" data-lv="1">1.25%</span>。<br></td></tr>
        
      </tbody>
    </table>
  </div>
</div>
<script>
/* 倍率表 */
const base = [50,100,13,20,130,80,200];   // 1 级
const step = [10,3,1,1.2,2,6,2.5];   // 每级增量
const spans = ['val1','val2','val3','val4','val5','val6','val7'];
const range = document.getElementById('levelRange');
const display = document.getElementById('levelDisplay');
function updateLevel(lv){
  const levelNum = Number(lv);
  display.textContent = 'Lv.'+lv;
  // 等级数值本身也同步颜色等级
  if(levelNum === 12){
    display.className = 'level-value legend-text';
  } else {
    display.className = 'level-value';
    const levelColors = [
      '#d3af37','#d3af37','#d3af37', // 1-3 浅灰（入门）
      '#d3af37','#d3af37','#d3af37', // 4-6 亮银（进阶）
      '#d3af37','#d3af37','#d3af37', // 7-9 暗金（稀有）
      '#d3af37','#d3af37',           // 10-11 深紫（史诗）
      ''                              // 12级单独处理
    ];
    display.style.color = levelColors[levelNum - 1];
  }
  // 技能数值颜色
  base.forEach((b,i)=>{
    const val = b + step[i]*(levelNum-1);
    const el  = document.getElementById(spans[i]);
    el.textContent = val+'%';
    /* 颜色 */
    const colors = [
      '#d3af37','#d3af37','#d3af37', // 1-3 浅灰（入门）
      '#d3af37','#d3af37','#d3af37', // 4-6 亮银（进阶）
      '#d3af37','#d3af37','#d3af37', // 7-9 暗金（稀有）
      '#d3af37','#d3af37',           // 10-11 深紫（史诗）
      ''                              // 12级单独处理
    ];
    // 12级（传说）：霓虹金渐变
    if(levelNum === 12){
      el.className = 'legend-text';
    } else {
      el.className = '';
      el.style.color = colors[levelNum - 1];
    }
  });
}
range.addEventListener('input', e=>{
  updateLevel(e.target.value);
});
updateLevel(1); // 初始化
/* 移除折叠技能函数（因无需点击折叠，故删除触发逻辑） */
</script>
<script>
/* ========== 专武 ========== */
const weaponData = {
  wCrit: [40,45,50,55,60],
  wDmg:  [4.0,4.5,5.0,5.5,6.0],
  wCd:   [10.0,15.0,20.0,25.0,30.0]
};
function updateWeapon(){
  const lv = document.getElementById('weaponLv').value;
  document.getElementById('wCrit').textContent = weaponData.wCrit[lv-1];
  document.getElementById('wDmg').textContent  = weaponData.wDmg[lv-1];
  document.getElementById('wCd').textContent   = weaponData.wCd[lv-1];
  /* 专武颜色同步稀有度递进 */
  const weaponColors = [
    '#d3af37', // Ⅰ 浅灰
    '#d3af37', // Ⅱ 亮银
    '#d3af37', // Ⅲ 暗金
    '#d3af37', // Ⅳ 深紫
    '#d3af37'  // Ⅴ 霓虹金
  ];
  document.querySelectorAll('.w-val').forEach(el=>{
    el.style.color = weaponColors[lv-1];
  });
}
/* ========== 命座颜色同步稀有度递进 ========== */
function colorConstellation(){
  const constColors = [
    '#d3af37','#d3af37','#d3af37', // 1-3命 浅灰→亮银（入门-进阶）
    '#d3af37','#d3af37','#d3af37'  // 4-6命 亮银→暗金→深紫（进阶-稀有-史诗）
  ];
  document.querySelectorAll('.const-val').forEach(el=>{
    const lv = Number(el.dataset.lv);
    el.style.color = constColors[lv-1];
  });
}
/* 初始化 */
updateWeapon();
colorConstellation();
</script>
<!-- 播放器iframe：跨页无缝播放 -->
<iframe 
    id="musicPlayerIframe"
    src="music-player.html"
    style="
        display: block !important;
        visibility: visible !important;
        height: 400px !important;
        width: 100% !important;
        z-index: 99999 !important;
        position: fixed !important;
        bottom: 0 !important;
        left: 0 !important;
        right: 0 !important;
        border: none !important;
        background: transparent !important;
        overflow: visible !important;
    "
    frameborder="0"
    scrolling="no"
    onload="resizePlayerIframe(this)"
></iframe>
<script>
// 播放器高度自适应
function resizePlayerIframe(iframe) {
    try {
        const playerHeight = iframe.contentWindow.document.querySelector('.mini-music-player').offsetHeight;
        const progressHeight = iframe.contentWindow.document.querySelector('.player-progress').offsetHeight;
        iframe.style.height = (playerHeight + progressHeight + 10) + 'px';
    } catch (err) {
        iframe.style.height = '90px';
    }
}
// 跨页播放状态同步（广播监听）
const bc = new BroadcastChannel('music_player_broadcast');
bc.onmessage = (e) => {
    if (e.data.type === 'SYNC_STATE') {
        const iframe = document.getElementById('musicPlayerIframe');
        if (iframe) {
            iframe.contentWindow.postMessage({ type: 'SYNC_STATE', state: e.data.state }, '*');
        }
    }
};
// 页面加载初始化
window.addEventListener('load', () => {
    // 恢复播放器状态
    const iframe = document.getElementById('musicPlayerIframe');
    setTimeout(() => {
        try {
            iframe.contentWindow.postMessage({ type: 'RESTORE_PLAY_STATE' }, '*');
        } catch (err) {}
    }, 300);
});
// 监听播放器状态反馈
window.addEventListener('message', (e) => {
    if (e.data.type === 'PLAY_STATE_UPDATED') {
        console.log('当前播放状态:', e.data.state.isPlaying);
    }
});
</script>
</body>
</html>
